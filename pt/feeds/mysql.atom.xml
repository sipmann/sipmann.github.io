<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Sipmann - MySQL</title><link href="https://www.sipmann.com/pt/" rel="alternate"></link><link href="https://www.sipmann.com/feeds/mysql.atom.xml" rel="self"></link><id>https://www.sipmann.com/pt/</id><updated>2020-12-09T13:40:00-03:00</updated><subtitle></subtitle><entry><title>Trocando a senha de um usuário do MySQL sem downtime da aplicação</title><link href="https://www.sipmann.com/pt/mysql-dual-password-functionality.html" rel="alternate"></link><published>2020-12-09T13:40:00-03:00</published><updated>2020-12-09T13:40:00-03:00</updated><author><name>Maurício Camargo Sipmann</name></author><id>tag:www.sipmann.com,2020-12-09:/pt/mysql-dual-password-functionality.html</id><summary type="html">&lt;p&gt;Você deseja trocar a senha de um usuário do MySQL que está sendo utilizado por uma aplicação e não sofrer nenhum downtime? Bom, a versão 8.0.14 do MySQL foi liberada com uma feature chamada &lt;a href="https://dev.mysql.com/doc/refman/8.0/en/password-management.html#dual-passwords"&gt;Dual Password Support&lt;/a&gt;, com esta feature você pode alterar a senha de um usuário …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Você deseja trocar a senha de um usuário do MySQL que está sendo utilizado por uma aplicação e não sofrer nenhum downtime? Bom, a versão 8.0.14 do MySQL foi liberada com uma feature chamada &lt;a href="https://dev.mysql.com/doc/refman/8.0/en/password-management.html#dual-passwords"&gt;Dual Password Support&lt;/a&gt;, com esta feature você pode alterar a senha de um usuário mantendo a anterior ainda funcionando como uma forma de "backup". Desta forma, você ainda conseguirá autenticar com o usuário utilizando tanto a nova senha, quanto a anterior. Com isto, o seu processo de troca de senha fica algo como:&lt;/p&gt;
&lt;p&gt;1) Troque a senha mantendo a anterior;&lt;/p&gt;
&lt;p&gt;2) Faça o Deploy da nova configuração na sua aplicação/cluster;&lt;/p&gt;
&lt;p&gt;3) Descarte a senha anterior.&lt;/p&gt;
&lt;p&gt;Para alterar a senha mantendo a anterior, você deve rodar o seguinte comando:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;ALTER&lt;/span&gt; &lt;span class="n"&gt;USER&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;appuser&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;IDENTIFIED&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;new_password&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;RETAIN&lt;/span&gt; &lt;span class="n"&gt;CURRENT&lt;/span&gt; &lt;span class="n"&gt;PASSWORD&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Para descartar a senha antiga, rode o seguinte:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;ALTER&lt;/span&gt; &lt;span class="n"&gt;USER&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;appuser&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;DISCARD&lt;/span&gt; &lt;span class="n"&gt;OLD&lt;/span&gt; &lt;span class="n"&gt;PASSWORD&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;E pronto. Espero que isto lhe ajude a evitar downtimes e dores de cabeça :)&lt;/p&gt;</content><category term="MySQL"></category><category term="MySQL"></category><category term="MySQL Dual Password"></category></entry></feed>