<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Sipmann - MySQL</title><link href="https://www.sipmann.com/" rel="alternate"></link><link href="https://www.sipmann.com/feeds/mysql.atom.xml" rel="self"></link><id>https://www.sipmann.com/</id><updated>2020-12-09T13:40:00-03:00</updated><subtitle></subtitle><entry><title>Changing a MySQL user password across multiple application instances without downtime</title><link href="https://www.sipmann.com/mysql-dual-password-functionality.html" rel="alternate"></link><published>2020-12-09T13:40:00-03:00</published><updated>2020-12-09T13:40:00-03:00</updated><author><name>Maurício Camargo Sipmann</name></author><id>tag:www.sipmann.com,2020-12-09:/mysql-dual-password-functionality.html</id><summary type="html">&lt;p&gt;Do you need to change the password of a MySQL user that it's being used in an application, and can't allow a single downtime? Well, MySQL 8.0.14 came with a feature called &lt;a href="https://dev.mysql.com/doc/refman/8.0/en/password-management.html#dual-passwords"&gt;Dual Password Support&lt;/a&gt;, with it you can change the password keeping the previous password as a …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Do you need to change the password of a MySQL user that it's being used in an application, and can't allow a single downtime? Well, MySQL 8.0.14 came with a feature called &lt;a href="https://dev.mysql.com/doc/refman/8.0/en/password-management.html#dual-passwords"&gt;Dual Password Support&lt;/a&gt;, with it you can change the password keeping the previous password as a kind of backup. That way you still can log in using the old password or can start using the new one. With that, the password change workflow it's the following.&lt;/p&gt;
&lt;p&gt;1) Change password keeping the old one;&lt;/p&gt;
&lt;p&gt;2) Deploy the new config to your app/cluster;&lt;/p&gt;
&lt;p&gt;3) Discard the old password.&lt;/p&gt;
&lt;p&gt;To change the password and keep the old one, you have the following command.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;ALTER&lt;/span&gt; &lt;span class="n"&gt;USER&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;appuser&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;IDENTIFIED&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;new_password&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;RETAIN&lt;/span&gt; &lt;span class="n"&gt;CURRENT&lt;/span&gt; &lt;span class="n"&gt;PASSWORD&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;To discard the old one, run the following.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;ALTER&lt;/span&gt; &lt;span class="n"&gt;USER&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;appuser&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;DISCARD&lt;/span&gt; &lt;span class="n"&gt;OLD&lt;/span&gt; &lt;span class="n"&gt;PASSWORD&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And you are done. Hope you find it as useful as I :)&lt;/p&gt;</content><category term="MySQL"></category><category term="MySQL"></category><category term="MySQL Dual Password"></category></entry></feed>